<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manajer Bisnis - Pelanggan & Keuangan</title>
    <!-- Memuat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Konfigurasi Tailwind untuk menggunakan font Inter dan warna kustom -->

    <!-- Memuat ikon Lucide -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <link rel="stylesheet" href="./assets/css/style.css">
</head>
<body class="gradient-bg">

    <!-- Konten Utama (Full Width) -->
    <main id="main-content" class="main-content p-4 md:p-8">
        <div class="bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-6 md:p-8 min-h-[95vh] flex flex-col">
            
            <!-- Header Konten -->
            <header class="flex justify-between items-center mb-10 pb-2">
    <!-- Logo/Nama Aplikasi -->
    <div class="flex items-center">
        <svg class="lucide lucide-zap-bg mr-2 text-primary-purple" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor" stroke="none">
            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
        </svg>
        <h1 id="page-title" class="text-3xl font-extrabold text-gray-800">Dashboard Utama</h1>
    </div>

    <!-- Navigasi + Profil di kanan -->
    <div class="flex items-center space-x-8">
        <!-- Menu Navigasi -->
        <nav class="flex space-x-6 text-base font-semibold text-gray-700">
            <a href="#" class="header-nav-link hover:text-primary-purple transition duration-200" data-target-page="dashboard">Dashboard</a>
            <a href="#" class="header-nav-link hover:text-primary-purple transition duration-200" data-target-page="customers">Data Pelanggan</a>
            <a href="#" class="header-nav-link hover:text-primary-purple transition duration-200" data-target-page="payments">Pembayaran</a>
            <a href="#" class="header-nav-link hover:text-primary-purple transition duration-200" data-target-page="finance">Pembukuan</a>
        </nav>

        <!-- Profil Pengguna -->
        <div class="flex items-center">
            <img src="https://placehold.co/40x40/4B21E6/ffffff?text=A" alt="Foto Profil" class="w-10 h-10 rounded-full border-2 border-primary-purple">
        </div>
    </div>
</header>


            <!-- Area Konten Dinamis -->
            <section id="content-area" class="flex-grow">
                
                <!-- Konten Dashboard Awal -->
                <div id="dashboard" class="page-content block space-y-8">
                    <h2 class="text-2xl font-semibold text-gray-700">Ringkasan Kinerja Cepat</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6">
                        <!-- Total Pelanggan -->
                        <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100">
                            <div class="flex items-center justify-between">
                                <p class="text-sm font-medium text-gray-500">Total Pelanggan</p>
                                <svg class="lucide lucide-users text-primary-purple" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                            </div>
                            <p class="text-3xl font-bold mt-2 text-gray-900">0</p>
                            <p class="text-xs text-gray-500 mt-1">Data bulan lalu kosong</p>
                        </div>
                        
                        <!-- Total Pembayaran -->
                        <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100">
                            <div class="flex items-center justify-between">
                                <p class="text-sm font-medium text-gray-500">Total Pembayaran</p>
                                <svg class="lucide lucide-wallet text-secondary-purple" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-3.34"/><path d="M15 15h1a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h14"/></svg>
                            </div>
                            <p class="text-3xl font-bold mt-2 text-gray-900">Rp 0</p>
                             <p class="text-xs text-gray-500 mt-1">Data bulan lalu kosong</p>
                        </div>
                        
                        <!-- Uang Masuk -->
                        <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100">
                            <div class="flex items-center justify-between">
                                <p class="text-sm font-medium text-gray-500">Uang Masuk (Bulan Ini)</p>
                                <svg class="lucide lucide-trending-up text-green-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/></svg>
                            </div>
                            <p id="money-in" class="text-3xl font-bold mt-2 text-gray-900">Rp 0</p>
                            <p class="text-xs text-gray-500 mt-1">Belum ada pemasukan</p>
                        </div>

                        <!-- Uang Keluar -->
                        <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100">
                            <div class="flex items-center justify-between">
                                <p class="text-sm font-medium text-gray-500">Uang Keluar (Bulan Ini)</p>
                                <svg class="lucide lucide-trending-down text-red-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><polyline points="22 17 13.5 8.5 8.5 13.5 2 7"/></svg>
                            </div>
                            <p id="money-out" class="text-3xl font-bold mt-2 text-gray-900">Rp 0</p>
                            <p class="text-xs text-gray-500 mt-1">Belum ada pengeluaran</p>
                        </div>

                        <!-- Sisa Saldo (Baru Ditambahkan) -->
                        <div class="bg-white p-6 rounded-2xl shadow-lg border border-primary-purple/50">
                            <div class="flex items-center justify-between">
                                <p class="text-sm font-medium text-gray-500">Sisa Saldo (Bersih)</p>
                                <svg class="lucide lucide-banknote text-primary-purple" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><rect width="20" height="12" x="2" y="6" rx="2"/><circle cx="12" cy="12" r="2"/><path d="M6 12h.01M18 12h.01"/></svg>
                            </div>
                            <p id="net-balance" class="text-3xl font-bold mt-2 text-primary-purple">Rp 0</p>
                            <p class="text-xs text-gray-500 mt-1">Estimasi saldo berjalan</p>
                        </div>
                    </div>
                    
                    <h2 class="text-2xl font-semibold text-gray-700 pt-8 border-t border-gray-200 mt-8">Pilih Modul Managemen Bisnis</h2>

                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                        
                        <!-- Card: Pelanggan -->
                        <a href="#" class="nav-card p-6 bg-white/95 rounded-2xl shadow-lg transition duration-300 transform hover:-translate-y-1 border border-primary-purple/10 hover:border-primary-purple/50" data-target-page="customers">
                            <div class="flex flex-col items-start space-y-3">
                                <div class="p-3 bg-primary-purple/10 rounded-xl">
                                    <svg class="lucide lucide-users lucide-lg text-primary-purple" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800">Data Pelanggan</h3>
                                <p class="text-sm text-gray-500">Kelola data pelanggan, kontak, dan riwayat transaksi.</p>
                            </div>
                        </a>

                        <!-- Card: Pembayaran -->
                        <a href="#" class="nav-card p-6 bg-white/95 rounded-2xl shadow-lg transition duration-300 transform hover:-translate-y-1 border border-secondary-purple/10 hover:border-secondary-purple/50" data-target-page="payments">
                            <div class="flex flex-col items-start space-y-3">
                                <div class="p-3 bg-secondary-purple/10 rounded-xl">
                                    <svg class="lucide lucide-credit-card lucide-lg text-secondary-purple" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800">Lacak Pembayaran</h3>
                                <p class="text-sm text-gray-500">Catat status pembayaran, tagihan, dan piutang.</p>
                            </div>
                        </a>

                        <!-- Card: Pembukuan -->
                        <a href="#" class="nav-card p-6 bg-white/95 rounded-2xl shadow-lg transition duration-300 transform hover:-translate-y-1 border border-green-500/10 hover:border-green-500/50" data-target-page="finance">
                            <div class="flex flex-col items-start space-y-3">
                                <div class="p-3 bg-green-500/10 rounded-xl">
                                    <svg class="lucide lucide-landmark lucide-lg text-green-700" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><line x1="3" x2="21" y1="22" y2="22"/><path d="m6 18 3-4-2-4 4 2 2-5 4 2-2 4 3 4"/><line x1="2" x2="22" y1="6" y2="6"/><line x1="12" x2="12" y1="2" y2="22"/></svg>
                                </div>
                                <h3 class="text-xl font-bold text-gray-800">Pembukuan Keuangan</h3>
                                <p class="text-sm text-gray-500">Monitor uang masuk (pemasukan) dan uang keluar (pengeluaran).</p>
                            </div>
                        </a>
                    </div>
                    
                    <!-- Bagian Detail Transaksi Terbaru -->
                    <div class="mt-8">
                        <h3 class="text-xl font-semibold mb-4 text-gray-700">Aktivitas Terbaru</h3>
                        <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100">
                            <p class="text-gray-500">
                                Di sini akan ditampilkan ringkasan visual atau grafik untuk performa bisnis Anda.
                            </p>
                        </div>
                    </div>

                </div>

                <!-- Konten Pelanggan -->
                <div id="customers" class="page-content hidden space-y-6">
                    <!-- Konten Data Pelanggan (Tidak berubah) -->
                    <h2 class="text-2xl font-semibold text-gray-700">Data Pelanggan</h2>
                    
                    <!-- Area Kontrol (Edit/Simpan & Batal) -->
                    <div class="flex justify-end space-x-3">
                        <button id="edit-toggle-btn" class="px-4 py-2 bg-primary-purple text-white font-medium rounded-lg shadow-md hover:bg-secondary-purple transition duration-200">
                            Edit
                        </button>
                        <button id="cancel-btn" class="px-4 py-2 bg-gray-500 text-white font-medium rounded-lg shadow-md hover:bg-gray-600 transition duration-200 hidden">
                            Batal
                        </button>
                    </div>

                    <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100">
                        <p class="text-gray-600 mb-4">Daftar lengkap pelanggan, termasuk informasi kontak dan detail layanan.</p>
                        
                        <div class="overflow-x-auto">
                            <!-- Tabel Data Pelanggan -->
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">NO</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID PELANGGAN</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">NAMA</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ALAMAT</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">NOMOR HP</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">PAKET</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">TARIF</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">TANGGAL PASANG</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">STATUS</th>
                                    </tr>
                                </thead>
                                <tbody id="customer-table-body" class="bg-white divide-y divide-gray-100">
                                    <!-- Data akan dimuat secara dinamis -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Tombol Tambah Pelanggan -->
                    <div id="add-customer-btn-container" class="mt-4 text-center hidden">
                        <button id="add-customer-btn" class="px-6 py-3 bg-green-600 text-white font-semibold rounded-xl shadow-lg hover:bg-green-700 transition duration-200 flex items-center mx-auto">
                            <svg class="lucide lucide-user-plus mr-2" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><line x1="19" x2="19" y1="8" y2="14"/><line x1="22" x2="16" y1="11" y2="11"/></svg>
                            Tambah Pelanggan Baru
                        </button>
                    </div>

                </div>

                <!-- Konten Pembayaran (Diperbarui) -->
                <div id="payments" class="page-content hidden space-y-6">
                    <h2 class="text-2xl font-semibold text-gray-700">Lacak Pembayaran Pelanggan</h2>
                    
                    <div class="flex justify-between items-center bg-blue-50 p-4 rounded-xl border border-blue-100">
                        <p class="text-sm text-blue-800">Total pembayaran bulan ini: <span class="font-bold text-lg">Rp 0</span></p>
                        <button id="open-payment-modal-btn" class="px-4 py-2 bg-blue-600 text-white font-medium rounded-lg shadow-md hover:bg-blue-700 transition duration-200 text-sm">
                            <svg class="lucide lucide-plus-circle inline-block mr-1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="16"/><line x1="8" x2="16" y1="12" y2="12"/></svg>
                            Input Pembayaran Baru
                        </button>
                    </div>

                    <!-- Tabel Terbayar -->
                    <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100">
                        <div class="flex justify-between items-center mb-4">
                            <p class="text-black font-bold text-xl">TERBAYAR</p>
                            <!-- Filter Section -->
                            <div class="flex items-center space-x-2">
                                <select id="paid-month-filter" class="text-sm rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                                    <!-- Opsi bulan akan diisi oleh JavaScript -->
                                </select>
                                <select id="paid-year-filter" class="text-sm rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                                    <!-- Opsi tahun akan diisi oleh JavaScript -->
                                </select>
                                <button id="apply-paid-filter-btn" class="px-3 py-1.5 bg-primary-purple text-white text-sm font-medium rounded-md shadow-sm hover:bg-secondary-purple transition duration-200">
                                    Apply
                                </button>
                            </div>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">NO</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID PELANGGAN</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">NAMA</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">PAKET</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">TARIF</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">DISKON</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">TOTAL TARIF</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">STATUS PEMBAYARAN</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">TANGGAL PEMBAYARAN</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">PENGGUNAAN BULAN</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">METODE</th>
                                    </tr>
                                </thead>
                                <tbody id="payment-table-body" class="bg-white divide-y divide-gray-100">
                                    <!-- Data akan dimuat secara dinamis -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Tabel Belum Bayar (BARU) -->
                    <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100 mt-6">
                        <div class="flex justify-between items-center mb-4">
                            <p class="text-black font-bold text-xl">BELUM BAYAR</p>
                             <!-- Filter Section -->
                            <div class="flex items-center space-x-2">
                                <select id="unpaid-month-filter" class="text-sm rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                                    <!-- Opsi bulan akan diisi oleh JavaScript -->
                                </select>
                                <select id="unpaid-year-filter" class="text-sm rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                                     <!-- Opsi tahun akan diisi oleh JavaScript -->
                                </select>
                                <button id="apply-unpaid-filter-btn" class="px-3 py-1.5 bg-primary-purple text-white text-sm font-medium rounded-md shadow-sm hover:bg-secondary-purple transition duration-200">
                                    Apply
                                </button>
                            </div>
                        </div>
                        <p class="text-gray-600 mb-4 text-sm">Daftar pelanggan yang tagihannya belum tercatat di tabel Terbayar.</p>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">NO</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID PELANGGAN</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">NAMA</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">PAKET</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">TARIF</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">PENGGUNAAN BULAN</th>
                                    </tr>
                                </thead>
                                <tbody id="unpaid-table-body" class="bg-white divide-y divide-gray-100">
                                    <!-- Data akan dimuat secara dinamis -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Konten Pembukuan -->
                <div id="finance" class="page-content hidden space-y-8">
                    <h2 class="text-2xl font-semibold text-gray-700">Laporan Keuangan</h2>

                    <!-- Tabel Pemasukan -->
                    <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold text-green-700">Pemasukan</h3>
                            <!-- Filter Section -->
                            <div class="flex items-center space-x-2">
                                <select id="income-year-filter" class="text-sm rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                                    <!-- Opsi tahun akan diisi oleh JavaScript -->
                                </select>
                                <button id="apply-income-filter-btn" class="px-3 py-1.5 bg-primary-purple text-white text-sm font-medium rounded-md shadow-sm hover:bg-secondary-purple transition duration-200">
                                    Apply
                                </button>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pembayaran Bulan</th>
                                        <th class="px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Jumlah</th>
                                    </tr>
                                </thead>
                                <tbody id="income-table-body" class="bg-white divide-y divide-gray-100">
                                    <!-- Data akan dimuat secara dinamis -->
                                </tbody>
                                <tfoot class="bg-gray-50 border-t-2 border-gray-300">
                                    <tr>
                                        <th class="px-3 py-3 text-right text-sm font-bold text-gray-700 uppercase tracking-wider">Total Pemasukan</th>
                                        <td id="income-total" class="px-3 py-4 font-bold text-green-600 text-right">Rp 0</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>

                    <!-- Tabel Pengeluaran -->
                    <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100">
                        <div class="flex justify-between items-center mb-4">
                            <div class="flex-grow">
                                <h3 class="text-xl font-semibold text-red-700">Pengeluaran</h3>
                            </div>
                            <div class="flex items-center space-x-2">
                                <!-- Filter Section -->
                                <div id="expense-filter-container" class="flex items-center space-x-2">
                                    <select id="expense-month-filter" class="text-sm rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                                        <!-- Opsi bulan akan diisi oleh JavaScript -->
                                    </select>
                                    <select id="expense-year-filter" class="text-sm rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                                        <!-- Opsi tahun akan diisi oleh JavaScript -->
                                    </select>
                                    <button id="apply-expense-filter-btn" class="px-3 py-1.5 bg-primary-purple text-white text-sm font-medium rounded-md shadow-sm hover:bg-secondary-purple transition duration-200">
                                        Apply
                                    </button>
                                </div>
                                <div id="expense-controls" class="flex items-center space-x-2 ml-4">
                                    <button id="add-expense-btn" class="px-4 py-2 bg-red-600 text-white font-medium rounded-lg shadow-md hover:bg-red-700 transition duration-200 text-sm">
                                        <svg class="lucide lucide-plus-circle inline-block mr-1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="16"/><line x1="8" x2="16" y1="12" y2="12"/></svg>
                                        Input Pengeluaran
                                    </button>
                                    <button id="save-expense-btn" class="px-4 py-2 bg-green-600 text-white font-medium rounded-lg shadow-md hover:bg-green-700 transition duration-200 text-sm hidden">Simpan</button>
                                    <button id="cancel-expense-btn" class="px-4 py-2 bg-gray-500 text-white font-medium rounded-lg shadow-md hover:bg-gray-600 transition duration-200 text-sm hidden">Batal</button>
                                </div>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">NO</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">TANGGAL</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Jenis</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Banyaknya</th>
                                        <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Harga Satuan</th>
                                        <th class="px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Jumlah</th>
                                        <th id="expense-action-header" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="expense-table-body" class="bg-white divide-y divide-gray-100">
                                   <!-- Data akan dimuat secara dinamis -->
                                </tbody>
                                <tfoot class="bg-gray-50 border-t-2 border-gray-300">
                                    <tr>
                                        <th colspan="6" class="px-3 py-3 text-right text-sm font-bold text-gray-700 uppercase tracking-wider">Total</th>
                                        <td id="expense-total" class="px-3 py-4 font-bold text-red-600 text-right">Rp 0</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>

                    <!-- Saldo Akhir Section -->
                    <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-100 mt-8">
                        <h3 class="text-xl font-semibold text-primary-purple mb-4">Ringkasan Saldo Akhir</h3>
                        <table class="min-w-full">
                            <tbody class="divide-y divide-gray-200">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-3 py-4 text-sm font-medium text-gray-700">Sisa Saldo Tahun Sebelumnya</td>
                                    <td id="prev-year-balance" class="px-3 py-4 text-sm font-semibold text-gray-900 text-right">Rp 0</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-3 py-4 text-sm font-medium text-gray-700">Pemasukan (Tahun Berjalan)</td>
                                    <td id="current-year-income" class="px-3 py-4 text-sm font-semibold text-green-700 text-right">Rp 0</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-3 py-4 text-sm font-medium text-gray-700">Pengeluaran (Tahun Berjalan)</td>
                                    <td id="current-year-expense" class="px-3 py-4 text-sm font-semibold text-red-700 text-right">Rp 0</td>
                                </tr>
                                <tr class="bg-indigo-50 border-t-2 border-primary-purple">
                                    <td class="px-3 py-4 text-base font-bold text-primary-purple">SALDO AKHIR TAHUN INI</td>
                                    <td id="final-balance" class="px-3 py-4 text-base font-extrabold text-primary-purple text-right">Rp 0</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>

            </section>

        </div>
    </main>

    <!-- Modal Formulir Input Pembayaran (Baru Ditambahkan) -->
    <div id="payment-form-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <header class="flex justify-between items-center mb-6 border-b pb-3">
                <h3 class="text-2xl font-bold text-primary-purple">Formulir Pembayaran Baru</h3>
                <button id="close-payment-modal-btn" class="text-gray-400 hover:text-gray-600">
                    <svg class="lucide lucide-x" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M18 6 6 18M6 6l12 12"/></svg>
                </button>
            </header>
            
            <form id="payment-form" class="space-y-4">
                
                <!-- ID PELANGGAN (Input/Lookup) -->
                <div>
                    <label for="id_pelanggan" class="block text-sm font-medium text-gray-700">ID Pelanggan (Cari)</label>
                    <input type="text" id="id_pelanggan" name="id_pelanggan" placeholder="Contoh: MJ-001" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary-purple focus:ring-primary-purple p-3 uppercase" required>
                    <p id="lookup-message" class="text-xs mt-1 text-red-500"></p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- NAMA (Tampil Otomatis) -->
                    <div>
                        <label for="nama" class="block text-sm font-medium text-gray-700">Nama Pelanggan</label>
                        <input type="text" id="nama" name="nama" class="mt-1 block w-full rounded-lg bg-gray-100 border-gray-300 p-3 text-gray-600" readonly>
                    </div>
                    
                    <!-- PAKET (Tampil Otomatis) -->
                    <div>
                        <label for="paket" class="block text-sm font-medium text-gray-700">Paket Layanan</label>
                        <input type="text" id="paket" name="paket" class="mt-1 block w-full rounded-lg bg-gray-100 border-gray-300 p-3 text-gray-600" readonly>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- TARIF (Tampil Otomatis) -->
                    <div>
                        <label for="tarif" class="block text-sm font-medium text-gray-700">Tarif Dasar (Rp)</label>
                        <input type="text" id="tarif" name="tarif" class="mt-1 block w-full rounded-lg bg-gray-100 border-gray-300 p-3 font-semibold text-gray-700" readonly>
                        <input type="hidden" id="raw_tarif" value="0">
                    </div>
                    
                    <!-- DISKON (Input) -->
                    <div>
                        <label for="diskon" class="block text-sm font-medium text-gray-700">Diskon (Rp)</label>
                        <input type="number" id="diskon" name="diskon" value="0" min="0" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary-purple focus:ring-primary-purple p-3">
                    </div>
                    
                    <!-- TOTAL TARIF (Perhitungan Otomatis) -->
                    <div>
                        <label for="total_tarif" class="block text-sm font-medium text-gray-700">Total Tarif (Rp)</label>
                        <input type="text" id="total_tarif" name="total_tarif" class="mt-1 block w-full rounded-lg bg-indigo-50 border-primary-purple/50 p-3 font-bold text-primary-purple" readonly>
                        <input type="hidden" id="raw_total_tarif" value="0">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- PENGGUNAAN BULAN (Input/Dropdown) -->
                    <div>
                        <label for="penggunaan_bulan" class="block text-sm font-medium text-gray-700">Penggunaan Bulan</label>
                        <input type="month" id="penggunaan_bulan" name="penggunaan_bulan" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary-purple focus:ring-primary-purple p-3" required>
                    </div>

                    <!-- TANGGAL PEMBAYARAN (Date Picker) -->
                    <div>
                        <label for="tgl_pembayaran" class="block text-sm font-medium text-gray-700">Tanggal Pembayaran</label>
                        <input type="date" id="tgl_pembayaran" name="tgl_pembayaran" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary-purple focus:ring-primary-purple p-3" required>
                    </div>
                </div>

                <!-- METODE -->
                <div>
                    <label for="metode" class="block text-sm font-medium text-gray-700">Metode Pembayaran</label>
                    <select id="metode" name="metode" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary-purple focus:ring-primary-purple p-3" required>
                        <option value="">Pilih Metode</option>
                        <option value="Transfer Bank">Transfer Bank</option>
                        <option value="Kas Tunai">Kas Tunai</option>
                        <option value="E-Wallet">E-Wallet</option>
                    </select>
                </div>

                <div class="pt-4 flex justify-end space-x-3">
                    <button type="button" id="form-cancel-btn" class="px-5 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition duration-200">
                        Batal
                    </button>
                    <button type="submit" class="px-5 py-2 bg-primary-purple text-white font-semibold rounded-lg shadow-lg hover:bg-secondary-purple transition duration-200 flex items-center">
                        <svg class="lucide lucide-check-circle mr-2" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>
                        Catat Pembayaran
                    </button>
                </div>
            </form>
        </div>
    </div>

    
    <script src="./assets/js/main.js"></script>
</body>
</html>

